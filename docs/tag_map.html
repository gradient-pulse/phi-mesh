<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Phi-Mesh Tag Map</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg:#0b0e14; --panel:#10141c; --fg:#e6edf6;
      --muted:#9fb0c3; --accent:#7db7ff; --link:#a7c4ff;
      --border: rgba(255,255,255,0.10);
      --edge: rgba(200,215,235,0.28);
      --edge-dim: rgba(200,215,235,0.08);
    }
    html,body{height:100%;margin:0;background:var(--bg);color:var(--fg);font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;}
    .app{display:grid;grid-template-columns:320px 1fr;height:100%}

    /* Sidebar */
    aside{background:linear-gradient(180deg,var(--panel),rgba(18,22,30,.94),rgba(18,22,30,.90));border-right:1px solid var(--border);display:flex;flex-direction:column;gap:12px;padding:12px}
    .brand{display:grid;grid-template-columns:auto 1fr;gap:8px;align-items:center}
    .brand .logo{width:34px;height:34px;border-radius:8px;background:#172233;display:grid;place-items:center;font-weight:800;letter-spacing:.2px}
    .brand .title{font-weight:700}
    .hint{color:var(--muted);font-size:12px;margin-top:2px}
    .search{display:flex;gap:8px}
    #search{flex:1;background:#0e1219;border:1px solid var(--border);color:var(--fg);padding:8px 10px;border-radius:10px;outline:none}

    #details{background:rgba(255,255,255,0.03);border:1px solid var(--border);border-radius:12px;padding:12px;min-height:140px}
    #details h2{margin:.1rem 0 .5rem 0;font-size:15px}
    #details .muted{color:var(--muted);}

    /* Graph */
    svg{width:100%;height:100%}
    .link{stroke:var(--edge);stroke-width:1.1}
    .link.dim{stroke:var(--edge-dim)}
    .node circle{fill:#2cc4ff;stroke:#022433;stroke-width:1.2;filter:drop-shadow(0 0 1px rgba(0,0,0,.35))}
    .node.dim circle{opacity:.25}
    .node text{fill:#fff;font-size:11px;pointer-events:none}
    .node.dim text{opacity:.22}
    .node.focus circle{stroke:#bfe0ff;stroke-width:2}

    /* Pulse satellites */
    .satellite circle{stroke:#0b0e14;stroke-width:1.5}
    .age-very-new{fill:#ff6b6b}
    .age-new{fill:#ff9e66}
    .age-mid{fill:#ffc94d}
    .age-old{fill:#8ecbff}
    .age-very-old{fill:#6aa4ff;opacity:.85}

    /* Tooltip */
    #tooltip{position:fixed;pointer-events:none;z-index:20;background:#0f141d;color:#e6edf6;border:1px solid #243041;border-radius:10px;padding:8px 10px;font-size:13px;max-width:320px;box-shadow:0 6px 24px rgba(0,0,0,.45);display:none}
  </style>
</head>
<body>
  <div class="app">
    <aside>
      <div class="brand">
        <div class="logo">Φ</div>
        <div>
          <div class="title">Phi-Mesh Tag Map</div>
          <div class="hint">
            Hover a tag for its description • Click a tag to show pulse satellites • Click a pulse to see details
          </div>
        </div>
      </div>

      <div class="search">
        <input id="search" placeholder="Search tags…" />
      </div>

      <div class="hint" style="margin-top:-4px">
        Newer pulses appear warmer (red/orange); older ones cooler (blue).
      </div>

      <div id="details" class="muted">
        Pick a tag to see details. Hover a tag for descriptions. Click a tag to reveal pulse satellites (age-colored), then click a pulse to view its summary & links here.
      </div>
    </aside>

    <main style="position:relative;overflow:hidden">
      <div id="tooltip"></div>
      <svg id="graph"></svg>
    </main>
  </div>

  <!-- Data first -->
  <script src="data.js"></script>
  <!-- D3 -->
  <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
  <!-- Behavior -->
  <script src="graph.js?v=compat-shim"></script>
</body>
</html>
