<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Phi-Mesh Tag Map</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg:#0b0b0f; --panel:#11141a; --fg:#f5f7fb;
      --muted:#a2adba; --accent:#7db7ff; --link:#a7c4ff; --border:rgba(255,255,255,0.08);
      --linkStroke: rgba(200,215,235,0.30); --linkStrokeDim: rgba(200,215,235,0.08);
    }
    html,body{height:100%;margin:0;background:var(--bg);color:var(--fg);font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial}
    .app{display:grid;grid-template-columns:320px 1fr;height:100%}
    /* LEFT SIDEBAR */
    aside{background:linear-gradient(180deg, var(--panel), rgba(25,25,32,.92), rgba(25,25,32,.88));
          border-right:1px solid var(--border);display:flex;flex-direction:column;}
    header{padding:10px 12px;border-bottom:1px solid var(--border);display:flex;gap:12px;align-items:center}
    h1{margin:0;font-size:16px;letter-spacing:.2px}
    .hint{color:#aab6ca;font-size:12px;margin-left:auto}
    .searchBox{padding:10px 12px}
    #search{width:100%;background:#0f131a;border:1px solid var(--border);color:var(--fg);
            padding:8px 10px;border-radius:8px;outline:none}
    .panel{padding:10px 12px;border-top:1px solid var(--border)}
    .muted{color:#9aa4b2;font-size:12px}
    /* GRAPH AREA */
    #main{position:relative;overflow:hidden}
    svg{width:100%;height:100%}
    .link{stroke:var(--linkStroke);stroke-width:1.2}
    .link.dim{stroke:var(--linkStrokeDim)}
    .node circle{fill:#2cc4ff;stroke:#022433;stroke-width:1.2}
    .node.dim circle{opacity:.25}
    .node text{fill:#fff;font-size:11px;pointer-events:none}
    .node.dim text{opacity:.20}
    .focus circle{stroke:#bdf;stroke-width:2}
    /* Satellites (pulses) */
    .satellite circle{stroke:#10131a;stroke-width:1.5px}
    .age-very-new{fill:#ff6b6b}
    .age-new{fill:#ff9e66}
    .age-mid{fill:#ffc94d}
    .age-old{fill:#8ecbff}
    .age-very-old{fill:#6aa4ff;opacity:.85}
    /* Tooltip */
    #tooltip{position:absolute;pointer-events:none;z-index:20;background:#11151f;color:#e6edf6;
             border:1px solid #2a2f3d;border-radius:8px;padding:8px 10px;font-size:13px;
             max-width:340px;box-shadow:0 6px 24px rgba(0,0,0,.4);display:none}
    a{color:var(--link);text-decoration:none} a:hover{text-decoration:underline}
  </style>
</head>
<body>
  <div class="app">
    <aside>
      <header>
        <h1>Phi-Mesh Tag Map</h1>
        <div class="hint">Hover a tag for its description • Click a tag to show pulse satellites • Click a pulse to see details</div>
      </header>
      <div class="searchBox">
        <input id="search" placeholder="Search tags…"/>
      </div>
      <div class="panel">
        <div class="muted">Newer pulses appear warmer (red/orange); older ones cooler (blue).</div>
      </div>
      <div id="sidebar-content" class="panel">
        <div class="muted">Pick a tag to see details here.</div>
      </div>
    </aside>

    <main id="main">
      <div id="tooltip"></div>
      <svg id="graph" viewBox="0 0 1200 800" aria-label="Tag network graph"></svg>
    </main>
  </div>

  <!-- Load data first, then D3, then graph behavior -->
  <script src="data.js"></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="graph.js?v=tagmap-1"></script>
</body>
</html>
