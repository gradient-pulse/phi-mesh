<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Phi-Mesh Tag Map</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg:#0b0c10; --panel:#10131a; --fg:#e9eef8; --muted:#97a3b6;
      --accent:#82c7ff; --link:#9fc9ff; --linkDim:rgba(180,200,230,.13);
      --pulseWarm:#ff7a66; --pulseMed:#ffb066; --pulseCool:#86cbff;
    }
    html,body{height:100%;margin:0;background:var(--bg);color:var(--fg)}
    body{font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    .app{display:grid;grid-template-columns:260px 1fr 280px;height:100%}

    /* Sidebars */
    .sidebar,.pulse-sidebar{
      background:linear-gradient(180deg,var(--panel),rgba(20,20,28,.92));
      border-right:1px solid rgba(255,255,255,.06);
      padding:14px; overflow:auto;
      font-size:13px; line-height:1.3;
    }
    .pulse-sidebar{border-left:1px solid rgba(255,255,255,.06); border-right:none}
    h1{margin:0 0 6px 0;font-size:18px;letter-spacing:.2px}
    .hint{color:var(--muted);font-size:12px;margin-bottom:10px}
    #search{width:100%;background:#10131a;border:1px solid rgba(255,255,255,.08);
      color:var(--fg);padding:9px 10px;border-radius:8px;outline:none}

    .muted{color:var(--muted)}
    .ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}

    /* Graph */
    svg{width:100%;height:100%}
    .link{stroke:#b9c7dd;stroke-opacity:.26}
    .link.dim{stroke-opacity:.08}
    .node text{font-size:11px;fill:#d3e0f2;pointer-events:none}
    .node ellipse{fill:#74b7ff;stroke:none}
    .node.dim text{opacity:.18}
    .node.dim ellipse{opacity:.22}
    .node.focus ellipse{fill:#ffb199}

    /* Tooltip */
    #tooltip{
      position:fixed;left:0;top:0;display:none;background:#0f1522;color:var(--fg);
      border:1px solid rgba(255,255,255,.08);border-radius:10px;padding:10px 12px;
      max-width:320px;box-shadow:0 6px 18px rgba(0,0,0,.35);pointer-events:none;z-index:20;
      font-size:13px;line-height:1.3;
    }

    /* Right list items */
    .pulse-item{display:flex;gap:8px;align-items:center;margin:6px 0}
    .pulse-dot{width:8px;height:8px;border-radius:50%;background:#ff8a6a;flex:0 0 8px}
    .pulse-item a{color:var(--fg);text-decoration:none}
    .pulse-item a:hover{color:var(--link)}

    /* Hide scrollbars (WebKit) while still scrollable */
    .sidebar::-webkit-scrollbar,.pulse-sidebar::-webkit-scrollbar{width:0;height:0}
  </style>
  <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
  <script src="data.js"></script>
  <script src="map.js"></script>
</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <h1>Phi-Mesh Tag Map</h1>
      <div class="hint">Hover a tag for its description • Click a tag to list pulses • Click a pulse to see details</div>
      <input id="search" type="search" placeholder="Type to filter…" />
      <div id="sidebar-content" style="margin-top:12px">
        <div class="muted">Pick a pulse to see its summary, papers & podcasts.</div>
      </div>
    </aside>

    <svg id="graph" role="img" aria-label="Tag Map"></svg>

    <aside class="pulse-sidebar">
      <h2 style="margin:0 0 8px 0;font-size:14px">Pulses</h2>
      <div id="right-title" class="muted" style="margin-bottom:6px">Click a tag to list its pulses.</div>
      <div id="right-list"></div>
    </aside>
  </div>
  <div id="tooltip"></div>
</body>
</html>
