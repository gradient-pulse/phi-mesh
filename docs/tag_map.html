<!DOCTYPE html>
<meta charset="utf-8" />
<title>Phi-Mesh Tag Map</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  :root{
    --bg:#0b0b0f; --panel:#11141a; --fg:#f5f7fb;
    --muted:#a2adba; --accent:#7db7ff; --accent2:#9ad3ff; --link:#a7c4ff;
    --border: rgba(255,255,255,0.08);
    --linkStroke: rgba(200,215,235,0.30);
    --linkStrokeDim: rgba(200,215,235,0.08);
  }
  html,body{height:100%;margin:0;background:var(--bg);color:var(--fg);font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial}
  .app{display:grid;grid-template-columns:360px 1fr;height:100%}

  /* Sidebar */
  aside{background:linear-gradient(180deg, var(--panel), rgba(25,25,32,.92), rgba(25,25,32,.88));
        border-right:1px solid var(--border);display:flex;flex-direction:column;}
  header{padding:16px 16px 8px}
  h1{margin:0 0 10px 0;font-size:18px;letter-spacing:.2px}
  .search-row{display:flex;gap:8px;align-items:center}
  #tag-search{width:100%;background:#0f131a;border:1px solid var(--border);color:var(--fg);
              padding:10px 12px;border-radius:10px;outline:none}
  .clear-btn{background:#1b2230;border:1px solid var(--border);color:#cbd6e6;cursor:pointer;border-radius:10px;padding:8px 10px}

  .sidebar-section{padding:8px 16px 14px 16px;border-top:1px solid var(--border)}
  .pill{display:inline-block;background:#111b28;border:1px solid var(--border);color:#dbe7ff;
        padding:6px 10px;border-radius:999px;margin-right:8px;font-size:12px}

  .links h4{margin:8px 0 6px 0;font-size:13px;color:#cfe1ff}
  .links a{display:block;color:var(--link);text-decoration:none;margin:2px 0;font-size:13px}
  .links a:hover{text-decoration:underline}

  .empty-hint{color:var(--muted);font-size:13px;padding:16px}

  /* Graph */
  svg{width:100%;height:100%}
  .link{stroke:var(--linkStroke);stroke-width:1.2}
  .link.dim{stroke:var(--linkStrokeDim)}
  .node ellipse{fill:#2cc4ff;stroke:#022433;stroke-width:1.2;filter:drop-shadow(0 0 1px rgba(0,0,0,.3))}
  .node.dim ellipse{opacity:.25}
  .node text{fill:#fff;font-size:11px;pointer-events:none}
  .node.dim text{opacity:.20}
  .focus ellipse{stroke:#bdf;stroke-width:2}
</style>

<body>
<div class="app">
  <aside>
    <header>
      <h1>Phi-Mesh Tag Map</h1>
      <div class="search-row">
        <input id="tag-search" placeholder="Search tags…" />
        <button id="clear-search" class="clear-btn" title="Clear">×</button>
      </div>
    </header>

    <div id="tag-meta" class="sidebar-section">
      <div class="empty-hint">Pick a tag to see details.</div>
    </div>
    <div id="tag-links" class="sidebar-section links" style="display:none;">
      <h4>Papers</h4>
      <div id="papers"></div>
      <h4>Podcasts</h4>
      <div id="podcasts"></div>
    </div>
  </aside>

  <svg id="graph" viewBox="0 0 1200 800"></svg>
</div>

<!-- Load data first, then D3, then the new behavior -->
<script src="data.js"></script>
<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="graph.js?v=20250816"></script>
</body>
</html>
