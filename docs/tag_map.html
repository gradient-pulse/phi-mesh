<!DOCTYPE html>
<meta charset="utf-8" />
<title>Phi-Mesh Tag Map</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<style>
  :root{
    --bg:#0b0d11; --panel:#11141a; --fg:#eaf0f7;
    --muted:#9fb0c6; --accent:#7ec2ff; --accent2:#a3d7ff; --link:#b9d4ff;
    --border: rgba(255,255,255,0.08);
    --linkStroke: rgba(200,215,235,0.28);
    --linkStrokeDim: rgba(200,215,235,0.10);
  }
  html,body{height:100%;margin:0;background:var(--bg);color:var(--fg);font:14px/1.45 ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial}
  .app{display:grid;grid-template-columns:320px 1fr;height:100%}

  /* Sidebar */
  aside{
    background:linear-gradient(180deg, var(--panel), rgba(25,28,35,.94), rgba(25,28,35,.90));
    border-right:1px solid var(--border);display:flex;flex-direction:column;min-width:280px
  }
  header{padding:14px 14px 8px;border-bottom:1px solid var(--border)}
  h1{margin:0;font-size:18px;letter-spacing:.2px}
  .sub{margin-top:6px;color:var(--muted);font-size:12.5px}
  .search{padding:10px 14px;border-bottom:1px solid var(--border)}
  #tag-search{width:100%;background:#0f131a;border:1px solid var(--border);color:var(--fg);
    padding:10px 12px;border-radius:10px;outline:none}

  .sidebar-scroll{overflow:auto;padding:10px 14px}

  .details h2{margin:.4rem 0 .6rem 0;font-size:18px}
  .muted{color:var(--muted)}
  .chip{display:inline-block;border:1px solid var(--border);border-radius:999px;padding:3px 8px;margin:2px 6px 2px 0;background:#0f1722;color:#d9e8ff;font-size:12px}

  .linklist{margin:.4rem 0 .8rem 0}
  .linklist a{display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
              text-decoration:none;color:var(--link);padding:2px 0}
  .linklist a:hover{text-decoration:underline}

  /* Graph */
  svg{width:100%;height:100%}
  .link{stroke:var(--linkStroke);stroke-width:1.1}
  .link.dim{stroke:var(--linkStrokeDim)}
  .node ellipse{fill:#53b7ff; /* no stroke edge */ }
  .node.dim ellipse{opacity:.22}
  .node text{fill:#f7fbff;font-size:11px;pointer-events:none;user-select:none}
  .node.dim text{opacity:.18}
  .focus ellipse{filter:drop-shadow(0 0 3px rgba(125,200,255,.55))}
  .sat-dot{stroke:none}
  .sat-dot.dim{opacity:.2}

  /* tooltip */
  #tooltip{position:fixed;z-index:3;display:none;max-width:420px;
    background:#0f141c;border:1px solid var(--border);border-radius:12px;
    padding:10px 12px;color:#e6f1ff;box-shadow:0 6px 20px rgba(0,0,0,.35)}
  #tooltip .t-h{font-weight:700;margin-bottom:4px}
  #tooltip .t-d{opacity:.95;white-space:pre-wrap}
  #tooltip .t-hint{margin-top:6px;font-size:12px;color:#9eb2c9}
</style>

<body>
<div class="app">
  <aside>
    <header>
      <h1>Phi-Mesh Tag Map</h1>
      <div class="sub">Hover a tag for its description • Click a tag to show pulse satellites • Click a pulse to see details</div>
    </header>
    <div class="search">
      <input id="tag-search" placeholder="Type to filter…" />
    </div>
    <div id="sidebar" class="sidebar-scroll">
      <!-- intentionally empty at load; no extra hint text -->
      <div class="muted">Pick a pulse to see its summary, papers & podcasts.</div>
    </div>
  </aside>

  <svg id="graph" viewBox="0 0 1200 800"></svg>
</div>

<!-- Data first, then d3, then logic -->
<script src="data.js"></script>
<script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
<script src="graph.js?v=spiral-20250820b"></script>
<div id="tooltip"></div>
</body>
</html>
