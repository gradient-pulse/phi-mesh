<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Phi-Mesh Tag Map</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <!-- D3 for the force graph -->
  <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
  <style>
    html, body { margin:0; padding:0; height:100%; background:#0e0f12; color:#cfd6e4; font:14px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; }
    a { color:#7dc1ff; text-decoration:none; }
    a:hover { text-decoration:underline; }

    #app { display:grid; grid-template-columns: 320px 1fr 360px; grid-template-rows: 48px 1fr; height:100%; }
    header { grid-column: 1 / 4; display:flex; align-items:center; gap:12px; padding:8px 12px; border-bottom:1px solid #1f2330; background:#0f1116; }
    header h1 { font-size:16px; font-weight:600; margin:0 8px 0 0; letter-spacing:.2px; }
    #status { color:#97a3b6; font-size:12px; margin-left:auto; }

    #left { border-right:1px solid #1f2330; overflow:auto; padding:12px; }
    #right { border-left:1px solid #1f2330; overflow:auto; padding:12px; }
    #main { position:relative; overflow:hidden; }

    #search { width:100%; margin-top:6px; padding:8px; border-radius:8px; border:1px solid #2a2f3d; background:#0f1116; color:#cfd6e4; }

    #tooltip { position:absolute; pointer-events:none; z-index:20; background:#11151f; color:#e6edf6; border:1px solid #2a2f3d; border-radius:8px; padding:8px 10px; font-size:13px; max-width:320px; box-shadow:0 6px 24px rgba(0,0,0,.4); display:none; }
    svg { width:100%; height:100%; display:block; }

    .muted { color:#97a3b6; font-size:12px; }

    /* Graph styling */
    .link { stroke:#3a4153; stroke-opacity:.35; }
    .node { cursor:pointer; }
    .node circle { fill:#52a2ff; opacity:.9; }
    .node text { fill:#cfd6e4; font-size:11px; pointer-events:none; }

    .satellite { cursor:pointer; }
    .satellite circle { stroke:#10131a; stroke-width:1.5px; }
    .age-very-new { fill:#ff6b6b; }
    .age-new      { fill:#ff9e66; }
    .age-mid      { fill:#ffc94d; }
    .age-old      { fill:#8ecbff; }
    .age-very-old { fill:#6aa4ff; opacity:.85; }

    #right h2 { margin:.1rem 0 .5rem 0; font-size:14px; font-weight:700; }
    #right ul { margin:.25rem 0 .9rem 1rem; padding:0; }
  </style>
</head>
<body>
  <div id="app">
    <header>
      <h1>Phi-Mesh Tag Map</h1>
      <div class="muted">Hover a tag for its description • Click a tag for pulse satellites • Click a pulse for details</div>
      <div id="status"></div>
    </header>

    <aside id="left">
      <div>
        <label class="muted">Search</label>
        <input id="search" placeholder="Find a tag…" />
      </div>
      <div style="margin-top:16px">
        <div class="muted">Hint</div>
        <div style="font-size:12px;color:#aab6ca">
          • Newer pulses appear warmer (red/orange), older ones cooler (blue).<br/>
          • Sidebar lists details of the selected tag or pulse.
        </div>
      </div>
    </aside>

    <main id="main">
      <div id="tooltip"></div>
      <svg id="graph"></svg>
    </main>

    <aside id="right">
      <div class="muted">Details</div>
      <div id="details" style="margin-top:8px"></div>
    </aside>
  </div>

  <!-- Data first, then behavior -->
  <script src="data.js"></script>
  <script src="graph.js"></script>
</body>
</html>
