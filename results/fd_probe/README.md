# FD Probe Results

This folder contains **Numerical Turbulence Rhythm (NT Rhythm) probe results**.  
Each JSON file here is machine-generated by the **FD Probe GitHub Action** and paired with a pulse YAML entry under `pulse/auto/`.

---

## ğŸ“‚ File Naming

### Metrics JSON

__batchN.metrics.json

- `dataset`: sanitized dataset slug (e.g. `isotropic1024coarse`, `data_nasa_demo_timeseries.csv`)
- `source`: one of `jhtdb`, `nasa`, or `synthetic`
- `batchN`: sequential batch index for **that date** (`batch1`, `batch2`, â€¦)

**Example**

isotropic1024coarse_jhtdb_batch1.metrics.json

> We **reset batch numbering each calendar day**.  
> i.e., the first successful probe of a given day is `batch1`, the next is `batch2`, etc.

---

## ğŸ“‘ Metrics JSON Schema (minimal)

Each metrics file records the computed NT rhythm metrics:

- `period` â€” dominant rhythm period  
- `bpm` â€” beats per minute equivalent  
- `main_peak_freq` â€” primary peak frequency  
- `peaks` â€” spectrum peaks (array of `[freq, power]`)  
- `divergence_ratio` â€” simple coherence/divergence indicator  
- `reset_events` â€” detected resets (if any)  
- `n` â€” number of inter-event intervals used (if computed)  
- `mean_dt` â€” mean inter-event interval (if computed)  
- `cv_dt` â€” coefficient of variation of inter-event intervals (if computed)  
- `source` â€” `synthetic`, `nasa`, or `jhtdb`  
- `details` â€” probe metadata:
  - `dataset`: dataset slug or path  
  - `var`: variable name (e.g. `u`)  
  - `xyz`: spatial probe location `[x, y, z]`  
  - `window`: time window `[t0, t1, dt]`  

> **Note**: JSON holds *only* metrics. Pulse emission is handled separately.

---

## ğŸ— Pulse Emission

For each metrics file we emit a matching Î¦-Mesh pulse YAML under `pulse/auto/`:

pulse/auto/YYYY-MM-DD___batchN.yml

- Title is strictly **single-quoted** to match pulse style.
- Summary is a **folded** string (`>`), and now includes `n`, `mean_dt`, and `cv_dt` when present.
- If the dataset slug ends with `_batchN`, the summary echoes `(... batchN)` after the `Probe: {...}` block for quick visual traceability.

---

## ğŸ”— Workflow Connection

Files here are created by the workflow:

- **Workflow**: `.github/workflows/fd_probe.yml`

Each run:
1. Pulls a time series from the selected source.  
2. Computes NT rhythm metrics.  
3. Writes JSON results into this folder with a **date-scoped `batchN`**.  
4. Emits a matching YAML pulse into `pulse/auto/` with the same `batchN`.  

---

## ğŸš¦ Usage Rules

- âŒ **Do not edit files here manually** â€” they will be overwritten.  
- âœ… **Launch probes via the GitHub workflow interface.**  
- ğŸ—‚ Historical runs are preserved with `batch1`, `batch2`, etc., and **restart at `batch1` each day**.

---

## ğŸ“Œ Summary

- Canonical home for **FD probe outputs**.  
- Every file links to a **pulse** for semantic tracking.  
- Naming convention = `<dataset>_<source>_batchN.metrics.json` with **daily batch reset**.  
- Pulse summaries include `n`, `mean_dt`, `cv_dt`, and echo `batchN` when present.
